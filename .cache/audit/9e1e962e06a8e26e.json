{"file_path": "base/tests/integration/test_dataops_fastmcp_server.py", "status": "FAIL", "violations": [{"line": 0, "pattern_id": "llm_audit", "severity": "CRITICAL", "message": "I need to analyze this test file systematically for violations.\n\nLet me check the code against all violation patterns:\n\n**CRITICAL violations:**\n- None detected\n\n**HIGH violations:**\n1. **Lazy Imports** (lines 18-19): Imports inside module body after code execution\n   ```python\n   # Import service availability helpers\n   \n   # Import the service availability check - must modify path before import\n   sys.path.insert(0, str(find_module_root(Path(__file__)) / \"tests\"))\n   ```\n   The comment suggests imports should follow, but they're missing or the pattern is incomplete.\n\n2. **Relative Imports** (line 14): `from base.tests.conftest import requires_dgraph`\n   Wait - this is an absolute import, not relative. No violation here.\n\n3. **`# noqa` Without Justification** (line 14): \n   ```python\n   from base.tests.conftest import requires_dgraph  # noqa: E402 - path modification required first\n   ```\n   This HAS a justification explaining why E402 is needed. However, checking the actual code - there's NO path modification before this import. The `sys.path.insert(0, ...)` happens AFTER the import on line 18. This is incorrect - the noqa justification is false.\n\n4. **Missing Type Hints**: Multiple test methods lack return type hints for async functions (lines 25, 43, 70, 108, 131). Actually, they do have `-> None` return types. No violation.\n\n5. **Test file structure**: The polyglot shebang is on lines 1-2, and the `from __future__ import annotations` is missing. However, this file doesn't use complex type annotations that would require it, so this may not be a violation depending on project standards.\n\n**MEDIUM violations:**\n- **Non-Empty `__init__.py`**: Not applicable (this is a test file)\n\nLet me re-examine the **sys.path.insert** issue more carefully:\n\nLine 14: `from base.tests.conftest import requires_dgraph  # noqa: E402 - path modification required first`\nLines 18-19: `sys.path.insert(0, str(find_module_root(Path(__file__)) / \"tests\"))`\n\nThe path modification happens AFTER the import, making the noqa justification incorrect. However, looking more closely - the comment on line 14 says \"path modification required first\" but the modification is actually for something else (line 18's comment says \"must modify path before import\" but there's no import after it).\n\nThis is confusing code structure but let me check if it's actually a violation:\n- The noqa on line 14 is for E402 (module import not at top)\n- E402 is allowed in test files with justification\n- The justification \"path modification required first\" is present\n- However, the actual path modification comes AFTER this import, not before\n\nThis appears to be **incorrect justification** for the noqa marker.\n\n**FAIL: Line 14: # noqa justification incorrect - path modification (line 18) occurs AFTER import, not before as claimed**"}], "execution_time": 20.97591757774353}