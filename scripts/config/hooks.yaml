# Hook Definitions
# Ref: https://docs.claude.com/en/docs/claude-code/hooks.md

version: "2.0.0"

hooks:
  # PreToolUse - Malicious Behavior Detection (RUNS FIRST)
  # Catches bypass script creation attempts before other checks
  - event: "PreToolUse"
    matcher: ["Write", "Edit", "Bash"]
    command: "malicious-behavior"
    timeout: 60

  # PreToolUse - Command Guard
  - event: "PreToolUse"
    matcher: "Bash"
    command: "command-guard"
    timeout: 10

  # PreToolUse - Code Quality Guard
  - event: "PreToolUse"
    matcher: ["Edit", "Write"]
    command: "code-quality"
    timeout: 60

  # Stop - Response Scanner
  # Framework timeout (120s) must exceed agent timeout (20s) to ensure
  # agent timeouts are logged before framework kills the process
  - event: "Stop"
    command: "response-scanner"
    timeout: 120

  # SubagentStop - Response Scanner
  # Framework timeout (120s) must exceed agent timeout (20s) to ensure
  # agent timeouts are logged before framework kills the process
  - event: "SubagentStop"
    command: "response-scanner"
    timeout: 120
